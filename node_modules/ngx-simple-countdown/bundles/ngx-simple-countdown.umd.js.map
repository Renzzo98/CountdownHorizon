{"version":3,"file":"ngx-simple-countdown.umd.js.map","sources":["ng://ngx-simple-countdown/lib/ngx-simple-countdown.directive.ts","ng://ngx-simple-countdown/lib/ngx-simple-countdown.module.ts"],"sourcesContent":["import { Directive, Input, ElementRef, OnDestroy, OnInit } from '@angular/core';\nimport * as fromModel from './models';\nimport { interval, Observable, ReplaySubject } from 'rxjs';\nimport { tap, takeUntil, filter } from 'rxjs/operators';\n\n@Directive({\n  selector: '[simpleCountdown]'\n})\nexport class NgxSimpleCountdownDirective implements OnInit, OnDestroy {\n  @Input() dateTo: number;\n  @Input() language = 'en';\n  @Input() reactive = true;\n  @Input() endMessage = 'countdown finish';\n  @Input() hideUnit = '';\n  @Input() styles =\n    'font-size:20px;color:#FFF;background-color:#000;padding:10px 5px;font-weight:bold;min-width:40px;text-align:center;';\n\n  public keywords: fromModel.CountdownKeywords;\n  public countdownResult: fromModel.CountdownResult;\n  public dateNow: number;\n  public totalSecondes: number;\n  public interval$: Observable<number>;\n\n  constructor(private elementRef: ElementRef) {}\n\n  ngOnInit() {\n    this.getDateNow();\n    this.setLanguage(this.language);\n    this.initSimpleCountdown();\n  }\n\n  ngOnDestroy() {}\n\n  private initSimpleCountdown(): void {\n    this.totalSecondes = this.dateTo - this.dateNow;\n    this.countdownResult = this.updateSimpleCountdown(this.totalSecondes);\n    this.createHTML();\n\n    this.interval$ = interval(1000).pipe(\n      takeUntil(this.componentDestroyed(this)),\n      filter(_ => this.reactive && this.totalSecondes > 0),\n      tap(_ => this.totalSecondes--),\n      tap(\n        _ =>\n          (this.countdownResult = this.updateSimpleCountdown(\n            this.totalSecondes\n          ))\n      ),\n      tap(_ => this.createHTML())\n    );\n\n    this.interval$.subscribe();\n  }\n\n  private createHTML(): void {\n    let o = '';\n\n    if (this.totalSecondes > 0) {\n      o = '<div style=\"display:flex;\">';\n\n      if (this.isContent('d')) {\n        if (this.countdownResult.day > 0) {\n          o += `<div style=\"${this.styles}\">\n          ${this.countdownResult.day}${this.keywords.day}\n          </div>`;\n        }\n      }\n\n      if (this.isContent('h')) {\n        if (this.countdownResult.hours > 0 || this.countdownResult.day > 0) {\n          o += `<div style=\"${this.styles}\">\n          ${this.countdownResult.hours}${this.keywords.hours}\n        </div>`;\n        }\n      }\n\n      if (this.isContent('m')) {\n        if (\n          (this.countdownResult.minutes > 0 ||\n            this.countdownResult.hours > 0 ||\n            this.countdownResult.day > 0) &&\n          this.reactive\n        ) {\n          o += `<div style=\"${this.styles}\">\n          ${this.countdownResult.minutes}${this.keywords.minutes}\n        </div>`;\n        }\n      }\n\n      if (this.isContent('s')) {\n        if (\n          (this.countdownResult.seconds > 0 ||\n            this.countdownResult.minutes > 0 ||\n            this.countdownResult.hours > 0 ||\n            this.countdownResult.day > 0) &&\n          this.reactive\n        ) {\n          o += `<div style=\"${this.styles}\">\n          ${this.countdownResult.seconds}${this.keywords.seconds}\n        </div>`;\n        }\n        o += '</div>';\n      }\n    } else {\n      if (this.endMessage !== '') {\n        o += `<div style=\"${this.styles}\">${this.endMessage}</div>`;\n      }\n    }\n\n    this.elementRef.nativeElement.innerHTML = o;\n  }\n\n  private isContent(unit: string): boolean {\n    return !this.hideUnit.includes(unit);\n  }\n\n  private updateSimpleCountdown(secondes: number): fromModel.CountdownResult {\n    const Seconds = Math.floor((secondes / 1) % 60);\n    const Minutes = Math.floor((secondes / 1 / 60) % 60);\n    const Hours = Math.floor((secondes / (1 * 60 * 60)) % 24);\n    const Day = Math.floor(secondes / (1 * 60 * 60 * 24));\n\n    return {\n      day: Day,\n      hours: Hours,\n      minutes: Minutes,\n      seconds: Seconds\n    };\n  }\n\n  private getDateNow(): void {\n    this.dateNow = Math.floor(Date.now() / 1000);\n  }\n\n  private setLanguage(language: string): void {\n    if (language === 'fr') {\n      this.keywords = {\n        seconds: 's',\n        minutes: 'm',\n        hours: 'h',\n        day: 'j'\n      };\n    } else if (language === 'de') {\n      this.keywords = {\n        seconds: 'z',\n        minutes: 'm',\n        hours: 's',\n        day: 't'\n      };\n    } else if (language === 'es' || language === 'pt') {\n      this.keywords = {\n        seconds: 's',\n        minutes: 'm',\n        hours: 's',\n        day: 'd'\n      };\n    } else if (language === 'cs') {\n      this.keywords = {\n        seconds: 's',\n        minutes: 'm',\n        hours: 'h',\n        day: 'd'\n      };\n    } else if (language === 'pl') {\n      this.keywords = {\n        seconds: 's',\n        minutes: 'm',\n        hours: 'g',\n        day: 'd'\n      };\n    } else {\n      this.keywords = {\n        seconds: 's',\n        minutes: 'm',\n        hours: 'h',\n        day: 'd'\n      };\n    }\n  }\n\n  private componentDestroyed(component: OnDestroy) {\n    const oldNgOnDestroy = component.ngOnDestroy;\n    const destroyed$ = new ReplaySubject<void>(1);\n    component.ngOnDestroy = () => {\n      oldNgOnDestroy.apply(component);\n      destroyed$.next(undefined);\n      destroyed$.complete();\n    };\n    return destroyed$;\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { NgxSimpleCountdownDirective } from \"./ngx-simple-countdown.directive\";\n\n@NgModule({\n  declarations: [NgxSimpleCountdownDirective],\n  imports: [],\n  exports: [NgxSimpleCountdownDirective]\n})\nexport class NgxSimpleCountdownModule {}\n"],"names":["interval","takeUntil","filter","tap","ReplaySubject","Directive","ElementRef","Input","NgModule"],"mappings":"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"}
